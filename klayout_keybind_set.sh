#!/bin/bash

CONFIG_FILE=~/.klayout/klayoutrc
PUTSTR=" <key-bindings>'@@navigator_menu.navigator_main_menu.navigator_all_hier_levels':'';'@@navigator_menu.navigator_main_menu.navigator_freeze':'';'@@navigator_menu.navigator_main_menu.navigator_show_images':'';'@bookmarks_context_menu.follow_selection':'';'@bookmarks_context_menu.load_bookmarks':'';'@bookmarks_context_menu.manage_bookmarks':'';'@bookmarks_context_menu.save_bookmarks':'';'@hcp_context_menu.cell_user_properties':'';'@hcp_context_menu.flat_mode':'';'@hcp_context_menu.hide_cell':'';'@hcp_context_menu.open_current':'';'@hcp_context_menu.save_cell_as':'';'@hcp_context_menu.show_all':'';'@hcp_context_menu.show_as_top':'';'@hcp_context_menu.show_cell':'';'@hcp_context_menu.sorting.by_area':'';'@hcp_context_menu.sorting.by_area_reverse':'';'@hcp_context_menu.sorting.by_name':'';'@hcp_context_menu.split_mode':'';'@lcp_context_menu.add_others':'';'@lcp_context_menu.clean_up':'';'@lcp_context_menu.copy':'';'@lcp_context_menu.cut':'';'@lcp_context_menu.del':'';'@lcp_context_menu.group':'';'@lcp_context_menu.hide':'';'@lcp_context_menu.hide_all':'';'@lcp_context_menu.hide_empty_layers':'';'@lcp_context_menu.insert':'';'@lcp_context_menu.invert_selection':'';'@lcp_context_menu.invvalid':'';'@lcp_context_menu.paste':'';'@lcp_context_menu.regroup_menu.flatten':'';'@lcp_context_menu.regroup_menu.grp_d':'';'@lcp_context_menu.regroup_menu.grp_i':'';'@lcp_context_menu.regroup_menu.grp_l':'';'@lcp_context_menu.rename':'';'@lcp_context_menu.select_all':'';'@lcp_context_menu.select_source':'';'@lcp_context_menu.show':'';'@lcp_context_menu.show_all':'';'@lcp_context_menu.show_only':'';'@lcp_context_menu.sort_menu.sort_dli':'';'@lcp_context_menu.sort_menu.sort_idl':'';'@lcp_context_menu.sort_menu.sort_ild':'';'@lcp_context_menu.sort_menu.sort_ldi':'';'@lcp_context_menu.sort_menu.sort_name':'';'@lcp_context_menu.tab_menu.new_tab':'';'@lcp_context_menu.tab_menu.remove_tab':'';'@lcp_context_menu.tab_menu.rename_tab':'';'@lcp_context_menu.test_shapes_in_view':'';'@lcp_context_menu.toggle_visibility':'';'@lcp_context_menu.ungroup':'';'@lcp_context_menu.valid':'';'@lcp_context_menu.visibility_follows_selection':'';'@lcp_tabs_context_menu.new_tab':'';'@lcp_tabs_context_menu.remove_tab':'';'@lcp_tabs_context_menu.rename_tab':'';'@secrets.duplicate_interactive':'';'@secrets.paste_interactive':'';'@secrets.sel_move_interactive':'';'@secrets.select_next_item':'';'@secrets.select_next_item_add':'';'@toolbar.move':'';'@toolbar.next_display_state':'';'@toolbar.prev_display_state':'';'@toolbar.ruler':'';'@toolbar.select':'';'@toolbar.technology_selector':'';bookmark_menu:'';bookmark_menu.bookmark_view:'';bookmark_menu.goto_bookmark_menu:'';bookmark_menu.load_bookmarks:'';bookmark_menu.manage_bookmarks:'';bookmark_menu.open_recent_menu_bookmarks:'';bookmark_menu.save_bookmarks:'';edit_menu:'';edit_menu.add_image:'';edit_menu.cancel:'';edit_menu.clear_all_rulers:'Shift+K';edit_menu.configure_rulers:'';edit_menu.copy:'';edit_menu.cut:'';edit_menu.delete:'';edit_menu.duplicate:'';edit_menu.image_menu:'';edit_menu.image_menu.bring_to_back:'';edit_menu.image_menu.bring_to_front:'';edit_menu.image_menu.clear_all_images:'';edit_menu.mode_menu:'';edit_menu.mode_menu.move:M;edit_menu.mode_menu.ruler:K;edit_menu.mode_menu.select:'';edit_menu.paste:'';edit_menu.redo:'';edit_menu.search_replace_viewer:'';edit_menu.select_menu:'';edit_menu.select_menu.disable_all:'';edit_menu.select_menu.enable_all:'';edit_menu.select_menu.pi_enable_13:'';edit_menu.select_menu.pi_enable_14:R;edit_menu.select_menu.pi_enable_15:L;edit_menu.select_menu.pi_enable_16:P;edit_menu.select_menu.pi_enable_17:'';edit_menu.select_menu.pi_enable_18:I;edit_menu.select_menu.pi_enable_20:'';edit_menu.select_menu.pi_enable_22:'';edit_menu.select_menu.pi_enable_23:'';edit_menu.select_menu.select_all:'';edit_menu.select_menu.unselect_all:'';edit_menu.selection_menu:'';edit_menu.selection_menu.area_perimeter:'';edit_menu.selection_menu.sel_flip_x:'';edit_menu.selection_menu.sel_flip_y:'';edit_menu.selection_menu.sel_free_rot:'';edit_menu.selection_menu.sel_move:'';edit_menu.selection_menu.sel_move_to:'';edit_menu.selection_menu.sel_rot_ccw:'';edit_menu.selection_menu.sel_rot_cw:'';edit_menu.selection_menu.sel_scale:'';edit_menu.selection_menu.tap:'';edit_menu.show_properties:'';edit_menu.undo:'';file_menu:'';file_menu.clone:'';file_menu.close:'';file_menu.close_all:'';file_menu.exit:'';file_menu.import_menu:'';file_menu.import_menu.import_def:'';file_menu.import_menu.import_gerber_menu:'';file_menu.import_menu.import_gerber_menu.import_gerber_new:'';file_menu.import_menu.import_gerber_menu.import_gerber_new_free:'';file_menu.import_menu.import_gerber_menu.import_gerber_open:'';file_menu.import_menu.import_gerber_menu.import_gerber_recent:'';file_menu.import_menu.import_lef:'';file_menu.import_menu.import_stream:'';file_menu.layout_props:'';file_menu.layout_stats:'';file_menu.load_layer_props:'';file_menu.open:'';file_menu.open_new_panel:'';file_menu.open_recent_menu:'';file_menu.open_recent_menu_layer_props:'';file_menu.open_recent_menu_sessions:'';file_menu.open_same_panel:'';file_menu.print:'';file_menu.pull_in:'';file_menu.reader_options:'';file_menu.reload:'';file_menu.restore_session:'';file_menu.save:F2;file_menu.save_all:'';file_menu.save_as:'';file_menu.save_layer_props:'';file_menu.save_session:'';file_menu.screenshot:'';file_menu.screenshot_to_clipboard:'';file_menu.setup:'';file_menu.view_log:'';file_menu.writer_options:'';help_menu:'';help_menu.about:'';help_menu.about_qt:'';help_menu.assistant:'';help_menu.show_all_tips:'';macros_menu:'';macros_menu.macro_development:'';tools_menu:'';tools_menu.browse_instances:'';tools_menu.browse_markers:'';tools_menu.browse_netlists:'';tools_menu.browse_shapes:'';tools_menu.d25:'';tools_menu.d25.edit_script:'';tools_menu.d25.new_script:'';tools_menu.d25.open_window:'';tools_menu.diff_tool:'';tools_menu.drc:'';tools_menu.drc.edit_script:'';tools_menu.drc.new_script:'';tools_menu.edit_layer_stack:'';tools_menu.lvs:'';tools_menu.lvs.edit_script:'';tools_menu.lvs.new_script:'';tools_menu.net_trace:'';tools_menu.packages:'';tools_menu.shapes_to_markers:'';tools_menu.shapes_to_markers.scan_layers:'';tools_menu.shapes_to_markers.scan_layers_flat:'';tools_menu.technologies:'';tools_menu.trace_all_nets_menu:'';tools_menu.trace_all_nets_menu.trace_all_nets:'';tools_menu.trace_all_nets_menu.trace_all_nets_flat:'';tools_menu.xor_tool:'';view_menu:'';view_menu.crosshair_cursor:'';view_menu.default_grid:'';view_menu.default_grid.default_grid_1:'';view_menu.default_grid.default_grid_2:'';view_menu.default_grid.default_grid_3:'';view_menu.mouse_tracking:'';view_menu.no_stipples:'';view_menu.reset_window_state:'';view_menu.show_bookmarks_view:'';view_menu.show_cell_boxes:'';view_menu.show_grid:'';view_menu.show_hierarchy_panel:'';view_menu.show_images:'';view_menu.show_layer_panel:'';view_menu.show_layer_toolbox:'';view_menu.show_libraries_view:'';view_menu.show_markers:'';view_menu.show_navigator:'';view_menu.show_texts:'';view_menu.show_toolbar:'';view_menu.synchronized_views:'';view_menu.transient_selection:'';zoom_menu:'';zoom_menu.ascend:'';zoom_menu.dec_max_hier:'';zoom_menu.descend:'';zoom_menu.global_trans:'';zoom_menu.global_trans.m0:'';zoom_menu.global_trans.m135:'';zoom_menu.global_trans.m45:'';zoom_menu.global_trans.m90:'';zoom_menu.global_trans.r0:'';zoom_menu.global_trans.r180:'';zoom_menu.global_trans.r270:'';zoom_menu.global_trans.r90:'';zoom_menu.goto_position:'';zoom_menu.inc_max_hier:'';zoom_menu.max_hier:'';zoom_menu.max_hier_0:'';zoom_menu.max_hier_1:'';zoom_menu.next_display_state:'';zoom_menu.prev_display_state:'';zoom_menu.redraw:'';zoom_menu.select_cell:'';zoom_menu.select_current_cell:none;zoom_menu.zoom_fit:F;zoom_menu.zoom_fit_sel:'Shift+F';zoom_menu.zoom_in:'';zoom_menu.zoom_out:'Shift+Z'</key-bindings>"


if [ ! -e ~/.klayout/klayoutrc_bkup ]; then
	cp $CONFIG_FILE ~/.klayout/klayoutrc_bkup
fi

cat $CONFIG_FILE | sed "/key-bindings/c\\$PUTSTR" > text.txt
rm $CONFIG_FILE
mv test.txt $CONFIG_FILE

